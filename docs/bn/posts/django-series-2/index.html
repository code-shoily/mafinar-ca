<!DOCTYPE html>
<html lang="en-us">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  <meta property="og:title" content=" ржЬрзНржпрж╛ржВржЧрзЛ ржЕрзНржпрж╛ржбржорж┐ржи ржХрзБржЗржЬ рзи ржПрж░ рж╕ржорж╛ржзрж╛ржи &middot;  learn тЦ╖ play тЦ╖ write" />
  
  <meta name="theme-color" content="#34495e" />
 
  <meta property="og:site_name" content="learn тЦ╖ play тЦ╖ write" />
  <meta property="og:url" content="//mafinar.ca/bn/posts/django-series-2/" />
  <meta property="og:image" content="//mafinar.ca/images/logo.png" />
  
  
  <meta property="og:type" content="article" />
  
  <meta property="og:article:author" content="https://facebook.com/mafinar" />
  
  <meta property="og:article:published_time" content="2018-06-01T02:00:13-04:00" />
  
  <meta property="og:article:tag" content="Django" />
  
  <meta property="og:article:tag" content="Admin" />
  
  <meta property="og:article:tag" content="ORM" />
  
  
  <meta property="og:description" content="ржЬрзНржпрж╛ржЩрзНржЧрзЛ рж╕рж┐рж░рж┐ржЬрзЗрж░ ржПржЗ ржжрзНржмрж┐рждрзАрзЯ ржкрж░рзНржмрзЗ ржУржЖрж░ржПржорзЗрж░ ржХрж┐ржЫрзБ ржЕрзНржпрж╛ржбржнрж╛ржирзНрж╕ ржмрж┐рж╖рзЯ (ржпрзЗржоржи OuterRef ржУ Subquery) ржирж┐рзЯрзЗ ржХржерж╛ рж╣рзЯрзЗржЫрзЗред" />

  <title>
     ржЬрзНржпрж╛ржВржЧрзЛ ржЕрзНржпрж╛ржбржорж┐ржи ржХрзБржЗржЬ рзи ржПрж░ рж╕ржорж╛ржзрж╛ржи &middot;  learn тЦ╖ play тЦ╖ write
  </title>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
  <link rel="stylesheet" href="//mafinar.ca/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/railscasts.min.css">

  <link href="https://fonts.googleapis.com/css?family=Abel" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.rawgit.com/tonsky/FiraCode/1.205/distr/fira_code.css">
  <link rel="shortcut icon" href="//mafinar.ca/images/favicon.ico" />
  <link rel="apple-touch-icon" href="//mafinar.ca/images/apple-touch-icon.png" />
  
</head>
<body>
    
    <header class="global-header"  style="background:#34495e">
    
    <section class="header-text">
      <h1><a href="//mafinar.ca/">learn тЦ╖ play тЦ╖ write</a></h1>
      
      <div class="tag-line">
        <a class='about-link' href='/pages/about/'>Mafinar</a> writes about <strike>Elixir and Python</strike> things
      </div>
      
      
      <a href="//mafinar.ca/" class="btn-header btn-back hidden-xs">
        <i class="fa fa-angle-left" aria-hidden="true"></i>
        &nbsp;Home
      </a>
      
      
      <div class="sns-links hidden-print">
  
  <a href="mailto:mafinar@gmail.com">
    <i class="far fa-envelope"></i>
  </a>
  
  
  <a href="https://facebook.com/mafinar" target="_blank">
    <i class="fab fa-facebook-f"></i>
  </a>
  
  
  <a href="https://twitter.com/mafinar" target="_blank">
    <i class="fab fa-twitter"></i>
  </a>
  
  
  <a href="https://linkedin.com/in/mafinar-khan" target="_blank">
    <i class="fab fa-linkedin-in"></i>
  </a>
  
  
  <a href="https://youtube.com/mafinar" target="_blank">
    <i class="fab fa-youtube"></i>
  </a>
  
  
  <a href="https://angel.co/mafinar-khan" target="_blank">
    <i class="fab fa-angellist"></i>
  </a>
  
  
  
  
  <a href="https://reddit.com/user/code-shoily" target="_blank">
    <i class="fab fa-reddit-alien"></i>
  </a>
  
  
  
  
  <a href="https://github.com/code-shoily" target="_blank">
    <i class="fab fa-github-alt"></i>
  </a>
  
  

  
  
  
</div>

    </section>
  </header>
  <main class="container">


<article>
  <header class="hidden-xs" style="margin-bottom: 20px">
    <h1 class="text-primary">ржЬрзНржпрж╛ржВржЧрзЛ ржЕрзНржпрж╛ржбржорж┐ржи ржХрзБржЗржЬ рзи ржПрж░ рж╕ржорж╛ржзрж╛ржи</h1>
    <div class="post-meta clearfix">
    
      <div class="post-date pull-left">
        <time datetime="2018-06-01T02:00:13-04:00">
          Jun 1, 2018
        </time>
      </div>
    
      <div class="pull-right">
        
          
          <span class="post-tag small"><a href="//mafinar.ca/bn/tags/django">Django</a></span>
          
          <span class="post-tag small"><a href="//mafinar.ca/bn/tags/admin">Admin</a></span>
          
          <span class="post-tag small"><a href="//mafinar.ca/bn/tags/orm">ORM</a></span>
          
                
      </div>
    </div>
  </header>
  <header class="visible-xs-block">
    <div class="text-center">
      <h1 class="text-primary">ржЬрзНржпрж╛ржВржЧрзЛ ржЕрзНржпрж╛ржбржорж┐ржи ржХрзБржЗржЬ рзи ржПрж░ рж╕ржорж╛ржзрж╛ржи</h1>
      <div class="post-meta clearfix">
      
        <div class="post-date text-center">
          Posted on
          <time datetime="2018-06-01T02:00:13-04:00">
            Jun 1, 2018
          </time>
        </div>
      
        <div class="text-center" style="padding-top: 10px">
          
          <span class="post-tag small"><a href="//mafinar.ca/tags/django">Django</a></span>
          
          <span class="post-tag small"><a href="//mafinar.ca/tags/admin">Admin</a></span>
          
          <span class="post-tag small"><a href="//mafinar.ca/tags/orm">ORM</a></span>
          
        </div>
      </div>
    </div>
  </header>
  <section>
    <p>ржХрж┐ржЫрзБржжрж┐ржи ржЖржЧрзЗ ржЖрж░рзЗржХржЯрж┐ ржкрзЛрж╕рзНржЯ ржжрж┐рзЯрзЗржЫрж┐рж▓рж╛ржо ржкрж╛ржЗржержи ржмрж╛ржВрж▓рж╛ржжрзЗрж╢ ржЧрзНрж░рзБржкрзЗред ржПржмрж╛рж░ рж╕ржорж╛ржзрж╛ржирзЗрж░ ржкрж╛рж▓рж╛ред ржкрзНрж░ржержорзЗржЗ рж╕рзНржХрзНрж░рж┐ржирж╢ржЯ ржжрзЗрзЯрж╛ ржпрж╛ржХ (ржпрж╛рждрзЗ рзз, ржЖржорж╛рж░ ржЯрж╛ржЗржк ржХржо ржХрж░рждрзЗ рж╣рзЯ ржУ рзи, ржлрзЗржЗрж╕ржмрзБржХ рж╢рзЗрзЯрж╛рж░рзЗрж░ рж╕ржорзЯрзЗ ржЖржЧрзЗрж░ ржкрзЛрж╕рзНржЯржЯрж┐ рж╕рзНржХрзНрж░рзАржирж╢ржЯ ржЖржХрж╛рж░рзЗ ржерзЗржХрзЗ ржпрж╛рзЯ)</p>

<p><img src="/img/admin-series-2.png" alt="Screenshot" /></p>

<p>ржПржЦржи, ржПржХржЯрж╛ ржЦрзБржмржЗ рж╕рж╣ржЬ рж╕ржорж╛ржзрж╛ржи ржпрж╛ ржЖржорж╛ржжрзЗрж░ ржорж╛ржерж╛рзЯ рж╕ржмрж╛рж░ ржЖржЧрзЗ ржЖрж╕ржмрзЗ рждрж╛ рж╣рж▓ рж░рж┐рж▓рзЗржЯрзЗржб ржирзЗржЗржорзЗрж░ ржмрзНржпржмрж╣рж╛рж░ред ржЕрж░рзНржерж╛рзО <code>category.product_set.count()</code> ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХрзЗ ржоржбрзЗрж▓рзЗрж░ ржкрзНрж░ржкрж╛рж░рзНржЯрж┐ (ржЕржержмрж╛ ржЕрзНржпрж╛ржбржорж┐ржирзЗрж░ ржорзЗржержб ржпрж╛ ржХрзНржпрж╛ржЯрзЗржЧрж░рж┐ ржЕржмржЬрзЗржХрзНржЯржХрзЗ ржжрзНржмрж┐рждрзАрзЯ ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ рж╣рж┐рж╕рзЗржмрзЗ ржирж┐ржмрзЗ) ржЖржХрж╛рж░рзЗ ржЙржкрж╕рзНржерж╛ржкржи ржХрж░рж╛, ржпрж╛рждрзЗ ржХрж░рзЗ ржЖржкржирж┐ <code>list_display</code> рждрзЗ ржПржХрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред ржПржЯрж┐ ржЖржкржирж╛ржХрзЗ рж╕ржарж┐ржХ рж░рзЗржЬрж╛рж▓рзНржЯ ржжрж┐ржмрзЗ ржХрж┐ржЫрзБ ржжрзВрж░ ржкрж░рзНржпржирзНржд, ржХрж┐ржирзНрждрзБ ржЖржкржирж┐ рж╕рж░рзНржЯрж┐ржВ ржХрж░ржмрзЗржи ржХрж┐ржнрж╛ржмрзЗ? <code>N+1</code> ржкрзНрж░ржмрзНрж▓рзЗржо ржПржХржЯрж╛ ржмрж╛ржЬрзЗ ржЬрж┐ржирж┐рж╕ (рж▓рж┐ржЩрзНржХржЯрж┐ ржкрзЬрж▓рзЗржЗ ржмрзБржЭрждрзЗ ржкрж╛рж░ржмрзЗржи)ред</p>

<p>ржЖрж░рзЗржХржЯрж╛ рж╕ржорж╛ржзрж╛ржи рж╣рждрзЗ ржкрж╛рж░рзЗ ржпржжрж┐ ржЖржкржирж┐ <code>Category</code> ржоржбрзЗрж▓рзЗ <code>number_of_products</code> ржжрж┐рзЯрзЗ ржерж╛ржХрзЗржи ржПржмржВ ржкрзНрж░рждрж┐ржмрж╛рж░ <code>Product</code> ржЕрзНржпрж╛ржб/ржбрж┐рж▓рж┐ржЯрзЗрж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржУржЗ ржлрж┐рж▓рзНржбржЯрж┐ржХрзЗ ржмрж╛рзЬрж╛рждрзЗ/ржХржорж╛рждрзЗ ржерж╛ржХрзЗржиред ржЕржирзНржпрж╛ржирзНржп ржлрж┐рж▓рзНржбрзЗрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗржУ ржПржХрж┐ ржмрзНржпржмрж╕рзНржерж╛ред ржПржЗ рж╕рж▓рзНржпрзБрж╢ржи ржкрзЬрж▓рзЗржЗ ржХрж┐ржирзНрждрзБ ржкрзНрж░ржмрзНрж▓рзЗржо ржкрзНрж░ржмрзНрж▓рзЗржо ржЧржирзНржз ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯред ржХрж╛рж░ржг, <code>Category</code> рж╕рзГрж╖рзНржЯрж┐ рж╣ржмрзЗ ржкрзНрж░ржержорзЗ, <code>Product</code> ржкрж░ржмрж░рзНрждрж┐рждрзЗ, <code>Category</code>-рж░ ржХрж┐ржирзНрждрзБ ржЬрж╛ржирж╛ ржЙржЪрж┐ржд ржирж╛ рждрж╛ржХрзЗ ржХрзЗ ржХрзЗ ржлрж░рзЗржи ржХрзА рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржЫрзЗ, ржХрж╛рж░ржг ржЖржкржирж┐ ржЖржкржирж┐ ржЖржкржирж╛рж░ рж╕ржлрзНржЯржУрзЯрзНржпрж╛рж░ржХрзЗ ржпрждржмрж╛рж░ ржЗржирж╣рзНржпрж╛ржирзНрж╕ ржХрж░ржмрзЗржи рждрждржмрж╛рж░ ржХрж┐ ржЖржкржирж┐ ржкрзНрж░рждрж┐ржЯрж╛ ржкрзНрж░рж╛ржХрзНрждржи ржЯрзЗржмрж┐рж▓рзЗ ржЧрж┐рзЯрзЗ ржЧрж┐рзЯрзЗ ржбрзЗржЯрж╛ржмрзЗржЬ ржЯрзЗржмрж┐рж▓ ржЕрж▓ржЯрж╛рж░ ржХрж░ржмрзЗржи? ржЖрж░ржУ ржмрзЬ ржХржерж╛ рж╣рж▓, ржЖржкржирж╛рж░ ржбрзЗржЗржЯрж╛ржмрзЗржЗржЬ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ ржХрж┐ржирзНрждрзБ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢рж╛ржи рж▓ржЬрж┐ржХ ржЕржержмрж╛ ржПржкрж┐ржЖржЗ ржЕржирзБржпрж╛рзЯрзА ржЧржарж┐ржд рж╣ржмрзЗ ржирж╛, ржбрзЗржЗржЯрж╛ржмрзЗржЗржЬ ржПрж░ рж▓ржХрзНрж╖рзНржп, рж╕рзНржХрзЛржк ржУ ржЕржкрзНржЯрзАржорж╛ржЗржЬрзЗрж╢рж╛ржи ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛, ржПржкрж┐ржЖржЗ ржЕржержмрж╛ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢рж╛ржи ржПрж░ рж▓ржХрзНрж╖рзНржп, рж╕рзНржХрзЛржк ржУ ржЕржкрзНржЯрзАржорж╛ржЗржЬрзЗрж╢рж╛ржи ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛ ржерзЗржХрзЗ ржнрж┐ржирзНржи, ржЖржЬржХрзЗрж░ ржПржЗ ржорж╛ржЗржХрзНрж░рзЛрж╕рж╛рж░рзНржнрж┐рж╕рзЗрж░ ржпрзБржЧрзЗ ржПржЯрж┐ ржЖрж░ржУ ржкрзНрж░ржпрзЛржЬрзНржпред ржХрж╛ржЬрзЗржЗ ржПржЗ ржЯрж╛ржЗржкрзЗрж░ рж╕рж▓рзНржпрзБрж╢ржиржХрзЗржУ ржЖржорж┐ ржмрж╛ржж ржжрж┐рзЯрзЗржЫрж┐ред</p>

<p>ржЙржкрж░рзЗрж░ ржжрзБржЯрж┐ рж╕рж▓рзНржпрзБрж╢ржи рж╢рзБржзрзБржорж╛рждрзНрж░ ржПржЗ ржХрзБржЗржЬрзЗрж░ ржЬржирзНржп ржмрж╛ржж ржпрзЗ рждрж╛ ржирзЯ, ржЖржорж┐ рж╕рж╛ржзрж╛рж░ржг ржмрзНржпржмрж╣рж╛рж░рзЗржУ ржирж┐рж░рзБрзОрж╕рж╛рж╣рж┐ржд ржХрж░ржмред ржкрзНрж░ржержоржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ рждржЦржиржЗ ржХрж░ржмрзЗржи ржпржЦржи ржЖржкржирж╛рж░ ржбрзЗржЗржЯрж╛ рж╕рж╛ржЗржЬ ржЫрзЛржЯ ржЕржержмрж╛ ржПржХрзНрж╕ржкрзНрж▓рж░рзЗржЯрж░рж┐ ржкрзНрж░рзЛржЧрзНрж░рж╛ржорж┐ржВ ржХрж░ржЫрзЗржи рж╢рзЗрж▓рзЗред ржХрж┐ржирзНрждрзБ ржкрж░рзЗрж░ржЯрж┐ ржПржХржЯрж╛ ржбрж┐ржЬрж╛ржЗржиржЧржд рж╕ржорж╕рзНржпрж╛ ржпрж╛ ржерзЗржХрзЗ ржЕржмрж╢рзНржпржЗ ржжрзВрж░рзЗ ржерж╛ржХржмрзЗржиред</p>

<p>ржПржмрж╛рж░ ржПржХржЯрж╛ рж╕рж▓рзНржпрзБрж╢ржирзЗ ржЖрж╕рж╛ ржпрж╛ржХред ржХрж┐ржЫрзБ рж╕ржорзЯрзЗрж░ ржЬржирзНржп ржнрзБрж▓рзЗ ржпрж╛ржи ржпрзЗ ржЖржкржирж┐ ржЬрзНржпрж╛ржВржЧрзЛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЗржи ржПржмржВ ржоржирзЗ ржХрж░рзБржи ржЖржкржирж┐ ржПржЯрж╛ржХрзЗ рж╕рж┐ржХрзБрзЯрзЗрж▓ ржжрж┐рзЯрзЗ рж╕ржорж╛ржзрж╛ржи ржХрж░ржмрзЗржиред ржЕрж░рзНржерж╛рзО <code>Category.objects.all()</code> ржПрж░ ржкржерзЗ ржирж╛ ржЧрж┐рзЯрзЗ <code>SELECT * FROM Category</code> ржкрже ржЕржмрж▓ржорзНржмржи ржХрж░ржмрзЗржиред рждрж╛рж╣рж▓рзЗ ржХрж┐ржирзНрждрзБ ржЕрж░рзНржзрзЗржХ ржХрж╛ржЬ рж╣рзЯрзЗ ржпрж╛рзЯред <code>SELECT name, (SELECT count(*) FROM Product WHERE category_id=c.id) number_of_product FROM Category c</code> ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ ржХрж┐ржирзНрждрзБ ржЖржкржирж┐ ржкрж╛ржЪрзНржЫрзЗржи ржПрж░ ржПржХржЗ ржХрзБрзЯрзЗрж░рж┐рждрзЗ <code>Category</code>-ржХрзЗ рж░рзЗржлрж╛рж░ржХрж╛рж░рж┐ <code>Product</code> рж╕ржВржЦрзНржпрж╛, ржпрж╛ <code>number_of_product</code> рж╣рж┐рж╕рзЗржмрзЗ ржерж╛ржХржмрзЗред <code>SELECT name, (SELECT avg(price) FROM Product WHERE category_id=c.id) number_of_product FROM Category c</code> ржерзЗржХрзЗ ржЖржкржирж┐ ржкрж╛ржмрзЗржи ржЧрзЬ ржорзВрж▓рзНржпред рждрзГрждрзАрзЯржЯрж┐рждрзЗ ржкрж░рзЗ ржЖрж╕рж┐, ржХрж╛рж░ржг рж╕рзЗржЯрж┐рж░ рж╕ржорж╛ржзрж╛ржи ржПржХржЗ ржкржжрзНржзрждрж┐рждрзЗ ржХрж░рж╛ ржЧрзЗрж▓рзЗржУ ржЬрзНржпрж╛ржЩрзНржЧрзЛ ржЕрзНржпрж╛ржбржорж┐ржирзЗрж░ ржЬржирзНржп ржЖржорж╛ржжрзЗрж░ ржХрж┐ржЫрзБ рж╕рж┐ржжрзНржзрж╛ржирзНржд ржирж┐рждрзЗ рж╣ржмрзЗ ржпрж╛рж░ ржЬржирзНржп ржЙржкрж░рзЗрж░ ржжрзБржЯрж┐ржХрзЗ ORM ржП ржирж┐рзЯрзЗ рждрж╛ржжрзЗрж░ ржЕрзНржпрж╛ржбржорж┐ржи ржЗржирзНржЯрзЗржЧрзНрж░рзЗрж╢рж╛ржи ржирж┐рзЯрзЗ ржЖржЧрзЗ ржХржерж╛ ржмрж▓рж╛ ржЬрж░рзБрж░рж┐ред</p>

<p>рждрзЛ ржЖржорж░рж╛ ржирзЗрж╕рзНржЯрзЗржб ржХрзБрзЯрзЗрж░рж┐ ржирж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рждрзЗ ржЪрж╛ржЪрзНржЫрж┐, рждржмрзЗ ржЬрзНржпрж╛ржЩрзНржЧрзЛрждрзЗред ржпрж╛ рждрж╛рзОржХрзНрж╖ржирж┐ржХржнрж╛ржмрзЗ ржмрзБржЭрж╛ ржпрж╛ржЪрзНржЫрзЗ рждрж╛ рж╣рж▓ <code>Category.objects.all()</code> рж╣ржмрзЗ ржорзВрж▓ ржХрзБрзЯрзЗрж░рж┐ред ржПрж░ржкрж░ ржЖржорж╛ржжрзЗрж░ ржПрж░ ржнрзЗрждрж░ annotate ржХрж░рждрзЗ рж╣ржмрзЗ ржирзЗрж╕рзНржЯрзЗржб ржХрзБрзЯрзЗрж░рж┐, ржЕрж░рзНржерж╛рзО <code>Category.objects.annotate(total=Product.objects.filter(тАж))</code>ред ржУржЗ &hellip; ржП ржпрж╛ржУрзЯрж╛рж░ ржХржерж╛ <code>WHERE category_id=c.id</code> ржЕржВрж╢ <code>SQL</code> ржХрзБрзЯрзЗрж░рж┐рж░ред ржЕрж░рзНржерж╛рзО, ржирзЗрж╕рзНржЯрзЗржб ржХрзБрзЯрзЗрж░рж┐ рж░рзЗржлрж╛рж░ ржХрж░ржЫрзЗ ржирзЗрж╕рзНржЯ-ржмрж╣рж┐рж░рзНржнрзБржд ржХрзБрзЯрзЗрж░рж┐рж░ ржХрзЛржи ржорзЗржорзНржмрж╛рж░ржХрзЗред ржЬрзНржпрж╛ржЩрзНржЧрзЛ <code>ORM</code> ржПржХрзЗ ржЪрж┐ржиржмрзЗ <code>OuterRef</code> рж╣рж┐рж╕рзЗржмрзЗ, ржирж╛ржо рж╢рзБржирзЗржЗ ржмрзБржЭрж╛ ржпрж╛ржЪрзНржЫрзЗ ржпрзЗ ржПрж░ ржХрж╛ржЬ рж╣рж▓ ржпрзЗ ржХрзБрзЯрзЗрж░рж┐ ржПржХрзЗ ржирж┐ржЬрзЗрж░ ржнрзЗрждрж░ ржирж┐рзЯрзЗ ржирж┐ржмрзЗ рждрж╛рж░ рж╕рзНржХрзЛржкрзЗрж░ ржХрж╛ржЙржХрзЗ рж░рзЗржлрж╛рж░ ржХрж░рж╛ред ржХрж╛ржЬрзЗржЗ ржЖржорж╛ржжрзЗрж░ ржЬрзНржпрж╛ржЩрзНржЧрзЛ ржХрзБрзЯрзЗрж░рж┐ ржжрж╛ржБрзЬрж╛рзЯ- <code>Category.objects.annotate(total=Subquery(Product.objects.filter(category=OuterRef(тАЬpkтАЭ)))</code>ред рждржмрзЗ ржПржЯрж┐ ржПрж░рж░ ржжрж┐ржмрзЗ ржХрж╛рж░ржг ржЖржкржирж╛рж░ ржПржХржЯрж╛ рж░рзЛ ржПржмржВ ржПржХржЯрж╛ ржХрж▓рж╛ржо ржкрзНрж░рзЯрзЛржЬржи ржирзЗрж╕рзНржЯрзЗржб ржХрзБрзЯрзЗрж░рж┐рж░ ржЬржирзНржпред ржЖрж░ рждрж╛рж░ ржЬржирзНржп ржЖржкржирж╛рж░ ржжрж░ржХрж╛рж░ values ржорзЗржержб ржпрж╛ ржжрж┐рзЯрзЗ ржЖржкржирж┐ ржЖржкржирж╛рж░ ржкрзНрж░рзЯрзЛржЬржи ржоржд рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзЗ ржирж┐ржмрзЗржи ржлрж┐рж▓рзНржбред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк <code>Category.objects.annotate(total=Subquery(Product.objects.filter(category=OuterRef(тАЬpkтАЭ)).values(тАЬcategoryтАЭ).annotate(total=Count(тАЬpkтАЭ)).values(тАЬtotalтАЭ)))</code>ред ржЕржирзЗржХ ржЭрж╛ржорзЗрж▓рж╛? ржПржХржЯрзБ ржнрзЗржЩрзНржЧрзЗ ржЪрж┐ржирзНрждрж╛ ржХрж░рж▓рзЗ ржмрзБржЭрждрзЗ ржкрж╛рж░ржмрзЗржи ржЖрж╕рж▓рзЗ рждрж╛ ржирж╛ред ржЖржкржирж┐ рж╕рж╛ржмржХрзБрзЯрзЗрж░рж┐ рждрзЗ ржкрзНрж░ржержорзЗ <code>values(тАЬcategoryтАЭ)</code> ржПрж░ ржорж╛ржзрзНржпржорзЗ ржХрзНржпрж╛ржЯрзЗржЧрж░рж┐ рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж▓рзЗржи, ржПрж░ржкрж░ <code>Product</code> ржП <code>annotate</code> ржХрж░рзЗ <code>Count</code> ржирж┐рж▓рзЗржи, ржПржмржВ ржПржХржЯрж╛ ржХрж▓рж╛ржо рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рждрзЗ рж╕рзЗржЗ ржХрж▓рж╛ржоржЯрж┐ржХрзЗржЗ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж▓рзЗржи, ржпрж╛ ржЖржмрж╛рж░ <code>annotate</code> ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ ржорзВрж▓ ржХрзБрзЯрзЗрж░рж┐ ржерзЗржХрзЗред ржЕрждржПржм ржЖржкржирж╛рж░ ржХрзБрзЯрзЗрж░рж┐ ржлрзЗрж░ржд рж░рзЗржЬрж╛рж▓рзНржЯрзЗ <code>total</code> ржирж╛ржорзЗ ржПржХржЯрж┐ ржорзЗржорзНржмрж╛рж░ ржерж╛ржХржмрзЗ ржпрж╛ <code>Category</code> ржоржбрзЗрж▓рзЗрж░ ржЕржирзНрждрж░рзНржнрзБржХрзНржд Product рж╕ржВржЦрзНржпрж╛ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░ржмрзЗред ржЖрж░ ржпржжрж┐ ржЖржкржирж┐ ржПржХрзЗ ржЖржирзБрж╕ржЩрзНржЧрж┐ржХ <code>ModelAdmin</code> рж╕рж╛ржмржХрзНрж▓рж╛рж╕рзЗрж░ ржУржнрж╛рж░рж░рж╛ржЗржбржХрзГржд <code>get_queryset</code> ржП ржврзБржХрж╛ржи рждрж╛рж╣рж▓рзЗ ржЕрзНржпрж╛ржбржорж┐ржи ржПржХрзЗ рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░рзНржб Model ржПрж░ ржорзЗржорзНржмрж╛рж░ рж╣рж┐рж╕рзЗржмрзЗ ржЪрж┐ржиржмрзЗ, ржХрж╛ржЬрзЗржЗ ржПржХрзЗ ржЖржкржирж┐ рж╕рж░рзНржЯрзЗрж░ ржЖржУрждрж╛рзЯ ржЖржирждрзЗ ржкрж╛рж░ржмрзЗржи ржпржжрж┐ ржмрж▓рзЗ ржжрж┐ржи <code>admin_order_field</code> ржП ржлрж┐рж▓рзНржбрзЗрж░ ржирж╛ржоред ржЖрж░ ржЖржкржирж╛ржХрзЗ рж╕рзЗржЗ total ржорзЗржержбрзЗрж░ рж╕ржоржХржХрзНрж╖ ржПржХржЯрж╛ ржорзЗржержб рж▓рж┐ржЦрждрзЗ рж╣ржмрзЗ <code>total(self, obj)</code> рж╣рж┐рж╕рзЗржмрзЗ ржоржбрзЗрж▓ржЕрзНржпрж╛ржбржорж┐ржи ржХрзНрж▓рж╛рж╕рзЗ ржХрж╛рж░ржг рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢рж╛ржиржХрж╛рж▓рзАржи рж╕ржорзЯрзЗ <code>ModelAdmin</code> ржЬрж╛ржиржд ржирж╛ ржУржЗ ржирждрзБржи ржорзЗржорзНржмрж╛рж░ рж╕ржорзНржкрж░рзНржХрзЗред</p>

<p>ржмрзБржЭрж╛ржЗ ржпрж╛ржЪрзНржЫрзЗ ржЧрзЬ ржорзВрж▓рзНржп ржмрзЗрж░ ржХрж░рждрзЗ ржЖржкржирж╛ржХрзЗ рж▓рж┐ржЦрждрзЗ рж╣ржмрзЗ (ржПржХрж┐ржнрж╛ржмрзЗ) <code>Category.objects.annotate(total=Subquery(Product.objects.filter(category=OuterRef(тАЬpkтАЭ)).values(тАЬcategoryтАЭ).annotate(avg_price=Avg(тАЬpriceтАЭ)).values(тАЬavg_priceтАЭ)))</code>ред ржПржжрзЗрж░ржХрзЗ рж╕рзНржЯрж╛ржЗрж▓ ржХрж░рж╛рж░ ржЬржирзНржпрзЗ ржПржжрзЗрж░ ржЖржирзБрж╕ржЩрзНржЧрж┐ржХ ржорзЗржержбржХрзЗ mark_safe ржПрж░ ржорж╛ржзрзНржпржорзЗ ржПржЗржЪржЯрж┐ржПржоржПрж▓ ржжрж┐рзЯрзЗ рж╕рзНржЯрж╛ржЗрж▓ ржжрж┐рждрзЗ ржкрж╛рж░рзЗржиред рж╢рзБржзрзБ ржоржирзЗ ржХрж░рзЗ admin_order_field ржХрзЗ ржПржХржЯрзБ ржЪрж┐ржирж┐рзЯрзЗ ржжрж┐ржи рж╕рж░рзНржЯ ржХрж┐ржнрж╛ржмрзЗ ржХрж░рж╛ рж▓рж╛ржЧржмрзЗред</p>

<p>ржПржмрж╛рж░ ржЖрж╕рж╛ ржпрж╛ржХ рждрзГрждрзАрзЯржЯрж┐ рждрзЗ, ржПржЗржЦрж╛ржирзЗ ржЖржкржирж╛ржХрзЗ ржкрзНрж░ржержо рждрж┐ржиржЯрж┐ ржкрзНрж░ржбрж╛ржХрзНржЯрзЗрж░ ржирж╛ржо ржЙрж▓рзНрж▓рзЗржЦ ржХрж░рждрзЗ рж╣ржмрзЗ, ржХрж┐ржирзНрждрзБ ржмрж▓рзЗржЫрж┐рж▓рж╛ржо ржирж╛ ржпрзЗ ржЖржкржирж┐ рж╕рж╛ржм ржЕрж░рзНржерж╛рзО ржирзЗрж╕рзНржЯрзЗржб ржХрзБрзЯрзЗрж░рж┐рждрзЗ рж╕рж░рзНржмрж╛ржзрж┐ржХ ржПржХржЯрж┐ рж░рзЛ ржУ ржПржХржЯрж┐ ржХрж▓рж╛ржо ржмрзЗрж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи? рждрзЛ ржХрзЗржоржирзЗ ржХрж┐? ржПржХржЯрж╛ рж╕рж▓рзБрж╢рж╛ржи рж╣рждрзЗ ржкрж╛рж░рзЗ, ржЖржкржирж┐ annotate ржПрж░ ржорж╛ржзрзНржпржорзЗ рж╕ржорж╕рзНржд name ржЧрзБрж▓рж┐ржХрзЗ aggregate ржХрж░ржмрзЗржи рж╕рзНржЯрзНрж░рж┐ржВ рж╣рж┐рж╕рзЗржмрзЗ, ржЕрж░рзНржерж╛рзО <code>Category.objects.annotate(product_names=Subquery(Product.objects.filter(category=OuterRef(тАЬpkтАЭ)).values(тАЬcategoryтАЭ).annotate(names=StringAgg(тАЬnameтАЭ, тАЬ||тАЭ)).values(тАЬnamesтАЭ)))</code>ред ржЕрж░рзНржерж╛рзО ржЖржорж┐ <code>||</code> ржПрж░ ржорж╛ржзрзНржпржорзЗ ржПржжрзЗрж░ржХрзЗ ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗржЫрж┐ ржПржмржВ ржПржжрзЗрж░ ржЦрзБрж▓рзЗ <code>UL&gt;LI</code> рждрзЗ ржкрж░рж┐ржгржд ржХрж░ржм ржЖржорж┐ ржЕрзНржпрж╛ржбржорж┐ржи ржорзЗржержбрзЗред рж╕ржорзНржкрзВрж░рзНржи ржХрзЛржб ржжрзЗржЦрж▓рзЗржЗ ржмрзБржЭрждрзЗ ржкрж╛рж░ржмрзЗржи-</p>

<pre><code class="language-python">@admin.register(Category)
class CategoryAdmin(admin.ModelAdmin):
    list_display = &quot;name&quot;, &quot;number_of_products&quot;, &quot;product_names&quot;, &quot;average_price&quot;
    ordering = &quot;name&quot;,
    search_fields = &quot;name&quot;, &quot;description&quot;,

    def number_of_products(self, obj):
        return obj.total

    number_of_products.admin_order_field = &quot;total&quot;

    def product_names(self, obj):
        html = &quot;&lt;li&gt;{}&lt;/li&gt;&quot;
        elems = &quot;&quot;.join([html.format(i) for i in sorted(obj.product_names.split(&quot;||&quot;)[:3])])
        print(&quot;\n\n\n&quot; + elems + &quot;\n\n\n&quot;)
        return mark_safe(f&quot;&lt;ul&gt;{elems}&lt;/ul&gt;&quot;)

    product_names.admin_order_field = &quot;product_names&quot;

    def average_price(self, obj):
        res = &quot;&lt;div style='text-align:right; width=100%'&gt;CA${:.2f}&lt;/div&gt;&quot;.format(obj.average_price)
        return mark_safe(res)

    average_price.admin_order_field = &quot;average_price&quot;

    def get_queryset(self, request):
        return super().get_queryset(self).annotate(
            total=Subquery(Product.objects.filter(category=OuterRef(&quot;pk&quot;)).values(&quot;category&quot;).annotate(
                total=Count(&quot;pk&quot;)).values(&quot;total&quot;)),
            product_names=Subquery(
                Product.objects.filter(
                    category=OuterRef(&quot;pk&quot;)).values(&quot;category&quot;).annotate(names=StringAgg(&quot;name&quot;, &quot;||&quot;)).values(&quot;names&quot;)
            ),
            average_price=Subquery(
                Product.objects.filter(
                    category=OuterRef(&quot;pk&quot;)).values(&quot;category&quot;).annotate(avg_price=Avg(&quot;price&quot;)).values(&quot;avg_price&quot;)
            ),
        )
</code></pre>

<p>рждрзЛ ржПржЦржи ржЖржорж░рж╛ ржжрзЗржЦрждрзЗ ржкрж╛ржЪрзНржЫрж┐ ржХрж┐ ржХрж░рзЗ ржЖржорж╛ржжрзЗрж░ ржХрзБржЗржЬрзЗрж░ рж╕ржорж╛ржзрж╛ржи ржХрж░рж╛ ржпрж╛рзЯред ржПржЦржи ржпрж╛ржУрзЯрж╛рж░ ржЖржЧрзЗ ржХрж┐ржЫрзБ ржХржерж╛ ржмрж▓рзЗ рж░рж╛ржЦржЫрж┐ ржпрж╛ ржЖржорж┐ ржкрж░ржмрж░рзНрждрж┐ ржХрзЛржи ржПржХ ржкрзЛрж╕рзНржЯрзЗ ржЙрж▓рзНрж▓рзЗржЦ ржХрж░ржм (ржирж╛ржУ ржХрж░рждрзЗ ржкрж╛рж░рж┐ рж╕ржорзЯ ржирж╛ ржкрзЗрж▓рзЗ)-</p>

<ul>
<li>ржпржжрж┐ ржЖржкржирж╛рж░ ржкрзНрж░ржбрж╛ржХрзНржЯ рж╕ржВржЦрзНржпрж╛ ржмрзЗрж╢рж┐ рж╣рзЯ рждрж╛рж╣рж▓рзЗ? ржорж╛ржирзЗ ржпржжрж┐ рззрзжрзжрзж ржкрзНрж░ржбрж╛ржХрзНржЯ ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ ржХрж┐ рзй ржПрж░ рж▓рж┐ржорж┐ржЯ ржХрзБрзЯрзЗрж░рж┐рждрзЗржЗ ржЙрж▓рзНрж▓рзЗржЦ ржХрж░рж╛ ржнрж╛рж▓ ржирж╛? рждрж╛ ржХрж┐ржнрж╛ржмрзЗ ржХрж░ржмрзЗржи? ржПржЗ рж▓рж┐ржЩрзНржХ ржжрзЗржЦрзЗ ржирж┐рждрзЗ ржкрж╛рж░рзЗржи, ржЖржорж┐ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░ржм рж╕рзЗржЯрж┐ ржирж┐рзЯрзЗ рж▓рзЗржЦрж╛рж░ред</li>
<li>ржЙржкрж░рзЗрж░ ржХрзБрзЯрзЗрж░рж┐ржЧрзБрж▓рзЛржХрзЗ рж▓рж┐ржЦрж╛рж░ ржЖрж░рзЗржХржЯрж┐ рж╕рж╣ржЬ ржЙржкрж╛рзЯ ржЖржЫрзЗ, ржмрж▓рждрзЗ ржкрж╛рж░ржмрзЗржи ржХрзА? ржЖржорж╛рж░ ржЖрж╕рж▓ ржЙржжрзНржжрзЗрж╢рзНржп ржЫрж┐рж▓ <code>Subquery</code> ржУ <code>OuterRef</code> ржПрж░ рж╕рж╛ржерзЗ ржкрж░рж┐ржЪрзЯ ржХрж░рж╛ржирзЛрж░ ржХрж┐ржирзНрждрзБ ржЕржирзНржпржнрж╛ржмрзЗ ржПржжрзЗрж░ рж╕ржорж╛ржзрж╛ржи рж╕ржорзНржнржмред ржПржХржЯрж┐ ржЙржжрж╛рж╣рж░ржг ржжрж┐рждрзЗ ржкрж╛рж░рж┐ ржУржЗ рж▓рж╛ржЗржирзЗ- <code>Category.objects.annotate(total=Count(F(тАЬproductтАЭ)))</code>ред ржЕржирзНржпржЧрзБрж▓рж┐ ржмрзЗрж░ ржХрж░рзЗ ржирж┐ржи ржПржмржВ <code>explain</code> ржорзЗржержбрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржмрзЗрж░ ржХрж░рзБржи ржХрзЛржиржЯрж╛ ржнрж╛рж▓ред</li>
<li>ржПржЗ ржмржЗржЯрж╛ ржкрж░рзЗ ржирж┐рждрзЗ ржкрж╛рж░рзЗржи, ржЦрзБржм рж╕ржВржХрзНрж╖рж┐ржкрзНрждржнрж╛ржмрзЗ ржПржмржВ рж╕рзБржирзНржжрж░ржнрж╛ржмрзЗ ржЬрж╛ржЩрзНржЧрзЛ ORM ржХрзЗ ржЙржкрж╕рзНржерж╛ржкржи ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ ржХрзЗржЗрж╕ ржмрж╛ржЗ ржХрзЗржЗ ржмрзЗрж╕рж┐рж╕рзЗред
ржЖржкрж╛рждржд ржЖржЬржХрзЗ ржПрждржЯрзБржХрзБ ржерж╛ржХред ржкрж░ржмрж░рзНрждрж┐ рж╕рж┐рж░рж┐ржЬрзЗ ржЕрзНржпрж╛ржбржорж┐ржи ржирж┐рзЯрзЗ ржЖрж░ржУ ржХрж┐ржЫрзБ рж▓рж┐ржЦржмред ржХрж┐ржирзНрждрзБ ржмрзБржЭрждрзЗржЗ ржкрж╛рж░ржЫрзЗржи ржпрзЗ ржЖржорж╛рж░ ржЯржкрж┐ржХрзЗрж░ ржЯрж╛ржЗржЯрзЗрж▓ ржЕрзНржпрж╛ржбржорж┐ржи рж╣рж▓рзЗржУ ржЖржорж┐ рж▓рж┐ржЦржЫрж┐ ржЬрзНржпрж╛ржЩрзНржЧрзЛрж░ ржЕржирзНржпрж╛ржирзНржп ржмрж┐рж╖рзЯ ржирж┐рзЯрзЗ ржУ ржЕрзНржпрж╛ржбржорж┐ржиржХрзЗ рж╢рзБржзрзБржорж╛рждрзНрж░ ржирзЯрзЗржЬ рж░рж┐ржбрж╛ржХрж╢ржи ржорзНржпрж╛ржЯрзЗрж░рж┐рзЯрж╛рж▓ рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред ржЖржмрж╛рж░ рж▓рж┐ржЦржм ржХрж┐ржЫрзБржжрж┐ржи ржкрж░ ржПржмржВ рж╣рж┐ржирзНржЯ ржжрж┐рзЯрзЗ рж░рж╛ржЦржЫрж┐- ORM ржХрж┐ржирзНрждрзБ рж╣ржмрзЗ ржкрж░ржмрж░рзНрждрж┐ ржкрзЛрж╕рзНржЯред</li>
</ul>

  </section>
  <footer>
    
    
    

    
    <ul class="pager">
      
      <li class="previous"><a href="//mafinar.ca/bn/posts/django-series-1/"><span aria-hidden="true">&larr;</span> Older</a></li>
      
      
      <li class="next"><a href="//mafinar.ca/bn/posts/graphql/">Newer <span aria-hidden="true">&rarr;</span></a></li>
      
    </ul>
    
  </footer>
</article>

<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
      
      
      if (window.location.hostname == "localhost")
                return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'mafinar-dot-ca';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </main>
  <footer class="container global-footer hidden-xs">
    <div class="copyright-note pull-left">
      &copy; Copyright 2018 Mafinar K.
    </div>
    <div class="sns-links hidden-print">
  
  <a href="mailto:mafinar@gmail.com">
    <i class="far fa-envelope"></i>
  </a>
  
  
  <a href="https://facebook.com/mafinar" target="_blank">
    <i class="fab fa-facebook-f"></i>
  </a>
  
  
  <a href="https://twitter.com/mafinar" target="_blank">
    <i class="fab fa-twitter"></i>
  </a>
  
  
  <a href="https://linkedin.com/in/mafinar-khan" target="_blank">
    <i class="fab fa-linkedin-in"></i>
  </a>
  
  
  <a href="https://youtube.com/mafinar" target="_blank">
    <i class="fab fa-youtube"></i>
  </a>
  
  
  <a href="https://angel.co/mafinar-khan" target="_blank">
    <i class="fab fa-angellist"></i>
  </a>
  
  
  
  
  <a href="https://reddit.com/user/code-shoily" target="_blank">
    <i class="fab fa-reddit-alien"></i>
  </a>
  
  
  
  
  <a href="https://github.com/code-shoily" target="_blank">
    <i class="fab fa-github-alt"></i>
  </a>
  
  

  
  
  
</div>

  </footer>

  <footer class="container global-footer visible-xs-block">
      <div class="copyright-note text-center">
        &copy; Copyright 2018 Mafinar K.
      </div>
    </footer>

  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/elixir.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/dart.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-112774615-1', 'auto');
    ga('send', 'pageview');
  </script>
  
  

  <script src="//www.powr.io/powr.js?external-type=html"></script>
  
  <div class="powr-hit-counter" id="9fb2ce72_1531159982"></div>
  
</body>
</html>

